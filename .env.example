# InferaDB Control API Environment Variables
# Copy this file to .env and update with your values
#
# All environment variables use the INFERADB_CTRL__ prefix with double
# underscores (__) as separators for nested config. Environment variables
# override values from config.yaml.

# =============================================================================
# Frontend
# =============================================================================

# Base URL for email verification and password reset links
# Development: http://localhost:9090
# Production: https://app.inferadb.com
INFERADB_CTRL__FRONTEND_BASE_URL=http://localhost:9090

# =============================================================================
# Server
# =============================================================================

# Public REST API server address (client-facing)
INFERADB_CTRL__SERVER__PUBLIC_REST=127.0.0.1:9090

# Public gRPC API server address
INFERADB_CTRL__SERVER__PUBLIC_GRPC=127.0.0.1:9091

# Internal/Private REST API server address (server-to-server, JWKS endpoint)
INFERADB_CTRL__SERVER__PRIVATE_REST=0.0.0.0:9092

# Worker threads for async runtime
INFERADB_CTRL__SERVER__WORKER_THREADS=4

# =============================================================================
# Storage
# =============================================================================

# Storage backend: "memory" or "foundationdb"
INFERADB_CTRL__STORAGE__BACKEND=memory

# FoundationDB cluster file (required if using foundationdb backend)
# INFERADB_CTRL__STORAGE__FDB_CLUSTER_FILE=/etc/foundationdb/fdb.cluster

# =============================================================================
# Authentication
# =============================================================================

# Key encryption secret for encrypting private keys at rest (REQUIRED in production)
# Generate with: openssl rand -base64 32
INFERADB_CTRL__AUTH__KEY_ENCRYPTION_SECRET=change-me-in-production

# WebAuthn configuration
INFERADB_CTRL__AUTH__WEBAUTHN__RP_ID=localhost
INFERADB_CTRL__AUTH__WEBAUTHN__RP_NAME=InferaDB
INFERADB_CTRL__AUTH__WEBAUTHN__ORIGIN=http://localhost:9090

# =============================================================================
# Email (SMTP)
# =============================================================================

INFERADB_CTRL__EMAIL__SMTP_HOST=localhost
INFERADB_CTRL__EMAIL__SMTP_PORT=1025
# INFERADB_CTRL__EMAIL__SMTP_USERNAME=
# INFERADB_CTRL__EMAIL__SMTP_PASSWORD=
INFERADB_CTRL__EMAIL__FROM_EMAIL=noreply@inferadb.local
INFERADB_CTRL__EMAIL__FROM_NAME=InferaDB

# =============================================================================
# Policy Service (InferaDB Server)
# =============================================================================

# Base URL for policy service (without port)
INFERADB_CTRL__POLICY_SERVICE__SERVICE_URL=http://localhost

# gRPC port for policy engine communication
INFERADB_CTRL__POLICY_SERVICE__GRPC_PORT=8081

# Internal HTTP port for webhooks and JWKS
INFERADB_CTRL__POLICY_SERVICE__INTERNAL_PORT=8082

# =============================================================================
# ID Generation
# =============================================================================

# Worker ID for Snowflake ID generation (0-1023)
# MUST be unique per instance in multi-instance deployments
INFERADB_CTRL__ID_GENERATION__WORKER_ID=0

# =============================================================================
# Observability
# =============================================================================

INFERADB_CTRL__OBSERVABILITY__LOG_LEVEL=info
INFERADB_CTRL__OBSERVABILITY__METRICS_ENABLED=true
INFERADB_CTRL__OBSERVABILITY__TRACING_ENABLED=false
# INFERADB_CTRL__OBSERVABILITY__OTLP_ENDPOINT=http://localhost:4317

# =============================================================================
# Cache Invalidation
# =============================================================================

# Webhook timeout in milliseconds
INFERADB_CTRL__CACHE_INVALIDATION__TIMEOUT_MS=5000

# Number of retry attempts on webhook failure (0 = fire-and-forget)
INFERADB_CTRL__CACHE_INVALIDATION__RETRY_ATTEMPTS=0
